<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="ziheng&#39;s Blog">
    <meta name="keyword"  content="blog">
    <link rel="shortcut icon" href="/img/favicon.png">
    <title>
        
          Python学习笔记 - 使用Python虚拟环境 - zihengCat
        
    </title>
    <link rel="canonical" href="https://zihengcat.github.io/2018/01/26/Python学习笔记-使用Python3虚拟环境/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/hux-blog.css">

    <!-- Custom Fonts -->
    <!-- Hux change font-awesome CDN to Qiniu -->
    <link rel="stylesheet" type="text/css" href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" >

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>
</head>

<body>
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">
                ziheng&#39;s Blog
            </a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
                    
                        
                    
                        
                        <li>
                            <a href="/about/">
                                About
                            </a>
                        </li>
                        
                    
                        
                        <li>
                            <a href="/archives/">
                                Archives
                            </a>
                        </li>
                        
                    
                        
                        <li>
                            <a href="/tags/">
                                Tags
                            </a>
                        </li>
                        
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');
    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px";
                }
            },400)
        } else {
        // OPEN
            $collapse.style.height = "auto";
            $navbar.className += " in";
        }
    }
</script>

    <!-- Post Header -->
<style type="text/css">
    header.intro-header {
        background-image: url('/img/home-bg-o.jpg');
    }
</style>
<header class="intro-header" >
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                          <a class="tag" href="/tags/#Python" title="Python">Python</a>
                        
                    </div>
                    <h1>Python学习笔记 - 使用Python虚拟环境</h1>
                    <h2 class="subheading"></h2>
                    <span class="meta">
                        Posted by zihengCat on
                        2018-01-26
                    </span>
                </div>
            </div>
        </div>
    </div>
</header>
<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
<!-- Post Container -->
            <div class="
                 col-lg-8 col-lg-offset-2
                 col-md-10 col-md-offset-1
                 post-container">
                <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>在项目开发中，我们有时会希望项目有一个专属环境（项目自有目录，指定Python版本，安装特定第三方软件包等），而与系统环境区分开来。</p>
<ul>
<li>不同应用开发环境相互独立</li>
<li>环境升级不影响其他应用，也不影响全局Python环境</li>
<li>有效防止软件包混乱与软件版本冲突</li>
</ul>
<blockquote>
<p>使用Python虚拟环境的优点</p>
</blockquote>
<h1 id="Python3-虚拟环境"><a href="#Python3-虚拟环境" class="headerlink" title="Python3 虚拟环境"></a>Python3 虚拟环境</h1><p>Python3 提供了<code>venv</code>模块，可以为我们创建出轻量级的<em>虚拟环境</em>。该虚拟环境是将全局Python环境复制一份出来给予特定项目。</p>
<h2 id="创建虚拟环境"><a href="#创建虚拟环境" class="headerlink" title="创建虚拟环境"></a>创建虚拟环境</h2><p>使用 Python3 自带的<code>venv</code>模块即可轻松创建一个虚拟环境。</p>
<pre><code>python3 -m venv /path/to/new/virtual/environment
</code></pre><blockquote>
<p>命令后接创建虚拟环境的路径</p>
</blockquote>
<p>命令执行完后，我们发现Python已经自动为我们创建好了目录，目录下存放着Python的主二进制文件，标准库文件与一些配置文件（从系统环境中复制而来）。</p>
<h2 id="激活-退出虚拟环境"><a href="#激活-退出虚拟环境" class="headerlink" title="激活/退出虚拟环境"></a>激活/退出虚拟环境</h2><p>创建完虚拟环境后，我们通过执行<code>path/bin</code>目录下的<code>activate</code>激活脚本即可在当前Shell下激活虚拟环境（Shell环境不同，激活脚本也不同）。</p>
<pre><code>cd /path/to/new/virtual/environment
source ./bin/activate
</code></pre><blockquote>
<p><code>source</code>激活虚拟环境</p>
</blockquote>
<p>想要退出当前虚拟环境也非常简单，在虚拟环境命令行下键入<code>deactivate</code>即可。</p>
<pre><code>(virtual environment)$ deactivate
</code></pre><blockquote>
<p>退出虚拟环境</p>
</blockquote>
<h2 id="使用虚拟环境"><a href="#使用虚拟环境" class="headerlink" title="使用虚拟环境"></a>使用虚拟环境</h2><p>激活虚拟环境后，我们可以在该虚拟环境下执行任何操作（安装第三方软件包等），而这些操作都与系统Python环境毫不相关。</p>
<p>需要注意的是，默认情况下，虚拟环境与系统环境是隔离的，虚拟环境下也没有系统环境中已经安装的第三方软件包，所有用到第三方软件包都需要我们在虚拟环境下再自行下载一遍（pip默认安装）。</p>
<h2 id="venv命令选项"><a href="#venv命令选项" class="headerlink" title="venv命令选项"></a><code>venv</code>命令选项</h2><p>使用<code>-h</code>选项可以查看<code>venv</code>命令的帮助文档。</p>
<pre><code>python3 -m venv -h

usage: venv [-h] [--system-site-packages] [--symlinks | --copies] [--clear]
            [--upgrade] [--without-pip]
            ENV_DIR [ENV_DIR ...]

Creates virtual Python environments in one or more target directories.

positional arguments:
  ENV_DIR               A directory to create the environment in.

optional arguments:
  -h, --help            show this help message and exit
  --system-site-packages
                        Give the virtual environment access to the system
                        site-packages dir.
  --symlinks            Try to use symlinks rather than copies, when symlinks
                        are not the default for the platform.
  --copies              Try to use copies rather than symlinks, even when
                        symlinks are the default for the platform.
  --clear               Delete the contents of the environment directory if it
                        already exists, before environment creation.
  --upgrade             Upgrade the environment directory to use this version
                        of Python, assuming Python has been upgraded in-place.
  --without-pip         Skips installing or upgrading pip in the virtual
                        environment (pip is bootstrapped by default)

Once an environment has been created, you may wish to activate it, e.g. by
sourcing an activate script in its bin directory.
</code></pre><p>简单翻译一下吧。</p>
<table>
<thead>
<tr>
<th style="text-align:center"><strong>选项</strong></th>
<th style="text-align:left"><strong>含义</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>--system-site-packages</code></td>
<td style="text-align:left">虚拟环境可访问系统环境下的第三方软件包</td>
</tr>
<tr>
<td style="text-align:center"><code>--symlinks</code></td>
<td style="text-align:left">使用链接而不是直接复制文件</td>
</tr>
<tr>
<td style="text-align:center"><code>--copies</code></td>
<td style="text-align:left">复制文件而不使用链接</td>
</tr>
<tr>
<td style="text-align:center"><code>--clear</code></td>
<td style="text-align:left">如果目标目录已有内容存在，先清空目录再创建虚拟环境</td>
</tr>
<tr>
<td style="text-align:center"><code>--upgrade</code></td>
<td style="text-align:left">更新虚拟环境</td>
</tr>
<tr>
<td style="text-align:center"><code>--without-pip</code></td>
<td style="text-align:left">创建虚拟环境时不安装pip（默认是安装的）</td>
</tr>
</tbody>
</table>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul>
<li>Python官方文档：<a href="https://docs.python.org/3/library/venv.html" target="_blank" rel="noopener">https://docs.python.org/3/library/venv.html</a></li>
</ul>

                <hr>
<!--
                <ul class="pager">
                    
                        <li class="previous">
                            <a href="/2018/02/01/Linux学习笔记-目录结构/" data-toggle="tooltip" data-placement="top" title="Linux学习笔记 - 目录结构">&larr; Previous Post</a>
                        </li>
                    
                    
                        <li class="next">
                            <a href="/2018/01/03/Vim学习笔记-常用查找替换命令/" data-toggle="tooltip" data-placement="top" title="Vim学习笔记 - 常用查找替换命令">Next Post &rarr;</a>
                        </li>
                    
                </ul>
-->
            </div>
<!-- Side Catalog Container -->
        
<!-- Sidebar Container -->
            <div class="
                 col-lg-8 col-lg-offset-2
                 col-md-10 col-md-offset-1
                 sidebar-container">
                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                       
                          <a class="tag" href="/tags/#Python" title="Python">Python</a>
                        
                    </div>
                </section>
                
                <!-- Friends Blog -->
                
            </div>
        </div>
    </div>
</article>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'always',
          placement: 'right',
          icon: '#'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>


    <!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center">
<!--
            
              <li>
                <a target="_blank"  href="https://github.com/zihengcat">
                  <span class="fa-stack fa-lg">
                    <i class="fa fa-circle fa-stack-2x"></i>
                    <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
            

            
-->
        </ul>
        <p class="copyright text-muted">
            Copyright &copy;
            ziheng&#39;s Blog
            2018
          <br>
            Theme by Hux
<!--
            <span style="display: inline-block; margin: 0 5px;">
            <i class="fa fa-heart"></i>
            </span>
-->
            <span> | </span>
            Ported by Kaijun
            <span> | </span>
            Modified by zihengCat
<!--
          <iframe
           style="margin-left: 2px; margin-bottom:-5px;"
           frameborder="0" scrolling="0" width="91px" height="20px"
           src="https://ghbtns.com/github-btn.html?user=kaijun&repo=hexo-theme-huxblog&type=star&count=true" >
          </iframe>
-->
          </br>
          <span id="busuanzi_container_site_pv">
            本站访问量<span id="busuanzi_value_site_pv"></span>次 |
          </span>
          <span id="busuanzi_container_site_uv">
            本站访客数<span id="busuanzi_value_site_uv"></span>人 |
          </span>
          <span id="busuanzi_container_page_pv">
            本文阅读量<span id="busuanzi_value_page_pv"></span>次
          </span>
        </p>
      </div>
    </div>
  </div>
</footer>


<!-- BuSuanzi.js -->
<script type="text/javascript" async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<!-- Highlight.js -->
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>



<script type="text/javascript" async src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ['$', '$'] ],
            skipTags: ['code', 'script', 'noscript', 'style', 'textarea', 'pre']
        }
    });
</script>


<!-- jQuery -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script type="text/javascript" src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Custom JavaScript -->
<script src="/js/hux-blog.js"></script>

<!-- Async Load Function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) {
          o.addEventListener(
              'load',
              function (e) {
                  c(null, e);
              },
              false
          );
      }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- jQuery.tagCloud.js -->
<!--
<script type="text/javascript">
    /* only load tagcloud.js in tag.html */
    if($('#tag_cloud').length !== 0) {
        async("https://raw.githubusercontent.com/addywaddy/jquery.tagcloud.js/master/jquery.tagcloud.js",
        function() {
            $.fn.tagcloud.defaults = {
                // size: { start: 1, end: 1, unit: 'em' },
                color: { start: '#bbbbee', end: '#0085a1' },
            };
            $('#tag_cloud a').tagcloud();
        });
    }
</script>
-->

<!--fastClick.js -->
<script>
    async("https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.js",
    function(){
        var $nav = document.querySelector("nav");
        if($nav) {
            FastClick.attach($nav);
        }
    })
</script>

<!-- Side Catalog -->


</body>
</html>
