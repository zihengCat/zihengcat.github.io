---
title: Git 实用技巧 - 克隆巨大代码仓库
catalog: true
date: 2019-02-22
tags: ["Git"]
---

# 前言

当我们使用`git clone`命令克隆**容量巨大**的代码仓库时，经常会出现断线，连接超时等问题，导致代码库拉取失败。而实际上，我们往往并不需要代码库中所有历史变更记录的数据，只需要主分支或者某一分支的最新代码即可，常用作源码编译。

# 解决方案

我们可以在使用`git clone`命令时，附加上`--depth`与`--branch`选项，即可解决克隆**容量巨大**代码仓库代码拉取失败的问题。

```bash
$ git clone --branch master \
            --depth=1 \
            https://github/project/repo.git
```

> 代码清单：克隆 Git 仓库最近一次提交的代码

| 选项      | 说明                                                  |
| --------- | ----------------------------------------------------- |
|`--depth`  | 指定克隆深度，为`1`即表示只克隆最近一次提交（commit） |
|`--branch` | 指定具体的克隆分支（如：`master`）                    |

> 表：`git`命令选项表

# 参考资料

- `Git`官方文档: https://git-scm.com/docs/git-clone

